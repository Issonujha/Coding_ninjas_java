/******************
 * Following is the main function we are using internally.
 * Refer this for completing the Dequeue class
 *
 
  public static void main(String[] args) {
		Scanner s = new Scanner(System.in);

		Dequeue dq = new Dequeue(10);

		while(true){
			int choice = s.nextInt(),input;
			switch (choice) {
			case 1:
				input = s.nextInt();
				dq.insertFront(input);
				break;
			case 2:
				input = s.nextInt();
				dq.insertRear(input);
				break;
			case 3:
				dq.deleteFront();
				break;
			case 4:
				dq.deleteRear();
				break;
			case 5:
				System.out.println(dq.getFront());
				break;
			case 6:
				System.out.println(dq.getRear());
				break;
			default:
				return ;
			}  
		}
	} 
 ******************/

public class Dequeue {
    // Complete this class
    private int deq[];
    private int rear;
    private int front;
    private int si;
    
    public Dequeue(int size){
        deq=new int[size];
        si=size;
        front=-1;
        rear=-1;
    }
    
    void insertFront(int ele){
        
        if(front==-1 && rear==-1)
        {
            front=0;
            rear=0;
            deq[front]=ele;
            return;
        }
        if((front+1)%si==rear){
    		System.out.println(-1);
            return;
        }
        front=(front+1)%si; 
        deq[front]=ele;
        
    }
    
    void insertRear(int ele){
        if(front==-1 && rear==-1)
        {
            front=0;
            rear=0;
            deq[rear]=ele;
            return;
        }
       
        if(front==rear-1 || rear==0 && front==si-1){
            System.out.println(-1);
            return;
        }
        if(rear==0)
            rear=si-1;
        else
            rear--;
        deq[rear]=ele;  
    }
    
    void deleteFront(){
        if(front==-1 && rear==-1){
            System.out.println(-1);
            return;
        }
        if(rear==front){
            rear=-1;
            front=-1;
            return;
        }
        if(front==0)
            front=si-1;
        else
            front--;
    }
    
    void deleteRear(){
        if(front==-1 && rear==-1){
            System.out.println(-1);
            return;
        }
        if(rear==front){
            rear=-1;
            front=-1;
            return;
        }
        rear=(rear+1)%si;
    }
    
    int getFront(){
        if(front==-1 && rear==-1){
            return -1;
        }
        return deq[front];
    }
    int getRear(){
        if(front==-1 && rear==-1){
            return -1;
        }
        return deq[rear];
    }
    
}